                                Release Summary

                              asterisk-16.11.0-rc1

                                Date: 2020-05-28

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-16.10.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                          Testers         Reporters                  
   8 Joshua C. Colp                                4 Guido Falsi              
   4 Guido Falsi                                   4 Alexander Traud          
   3 Alexander Traud                               3 nappsoft                 
   2 George Joseph                                 3 Joshua C. Colp           
   2 Alexander Traud                               1 lvl                      
   2 Pirmin Walthert                               1 Christoph Moench-Tegeder 
   1 Peter Turczak                                 1 George Joseph            
   1 Peter Sokolov (License #7070)                 1 Alexei Gradinari         
   1 Roger James                                   1 Roger James              
   1 Asterisk Development Team                     1 Shlomi Gutman            
   1 Jaco Kroon                                    1 Nicholas John Koch       
   1 Nathan Bruning                                1 Peter Turczak            
   1 sungtae kim                                   1 Etienne Lessard          
   1 Nicholas John Koch                            1 Jonathan Hunter          
                                                   1 sungtae kim              
                                                   1 Peter Sokolov            
                                                   1 Dmitry Wagin             
                                                   1 Nicholas John Koch       

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Bug

    Category: Applications/app_fax

   ASTERISK-28848: app_fax: Compile.
   Reported by: Alexander Traud
     * [302c20546a] Alexander Traud -- app_fax: SpanDSP headers do not use
       ast_malloc; ignore that.

    Category: Applications/app_osplookup

   ASTERISK-28804: [patch] app_osplookup.c: Avoid a format truncation.
   Reported by: Alexander Traud
     * [a5100e7171] Alexander Traud -- app_osplookup: Avoid a format
       truncation.

    Category: Applications/app_queue

   ASTERISK-28829: app_queue: leaking stasis subscription when Redirecting
   call
   Reported by: lvl
     * [92169e6f8a] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions
   ASTERISK-25844: app_queue: Ghost channels in "core show channels" output
   Reported by: Etienne Lessard
     * [92169e6f8a] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions

    Category: Applications/app_system

   ASTERISK-28776: Non async-signal-safe syscalls used after fork before exec
   Reported by: nappsoft
     * [6649b13b91] Pirmin Walthert -- app.c: make sure that no
       non-async-signal-safe syscalls are used after

    Category: Bridges/bridge_softmix

   ASTERISK-28898: bridge_softmix: Conference bridge not passing silent rtp
   packets
   Reported by: Jonathan Hunter
     * [48a3182c42] Joshua C. Colp -- bridge_softmix: Always remove audio
       from mixed frame.

    Category: Channels/chan_local

   ASTERISK-25844: app_queue: Ghost channels in "core show channels" output
   Reported by: Etienne Lessard
     * [92169e6f8a] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions

    Category: Channels/chan_sip/General

   ASTERISK-28898: bridge_softmix: Conference bridge not passing silent rtp
   packets
   Reported by: Jonathan Hunter
     * [48a3182c42] Joshua C. Colp -- bridge_softmix: Always remove audio
       from mixed frame.

    Category: Core/Channels

   ASTERISK-25844: app_queue: Ghost channels in "core show channels" output
   Reported by: Etienne Lessard
     * [92169e6f8a] Nathan Bruning -- app_queue: track masquerades in
       app_queue to avoid leaked stasis subscriptions

    Category: Core/General

   ASTERISK-28797: [patch] tcptls: Fix notice when TLS is enabled but not
   configured.
   Reported by: Alexander Traud
     * [023d73a0e7] Alexander Traud -- tcptls: Fix notice when TLS is enabled
       but not supported.

    Category: Core/Streams

   ASTERISK-28870: streams: One memory leak and one issue cloning streams
   Reported by: George Joseph
     * [f56149d019] George Joseph -- streams: Fix one memory leak and one
       formats ref issue

    Category: Resources/res_ari_bridges

   ASTERISK-28898: bridge_softmix: Conference bridge not passing silent rtp
   packets
   Reported by: Jonathan Hunter
     * [48a3182c42] Joshua C. Colp -- bridge_softmix: Always remove audio
       from mixed frame.

    Category: Resources/res_musiconhold

   ASTERISK-28892: res_musiconhold: Module res_musiconhold throws false
   warning
   Reported by: Nicholas John Koch
     * [7949343efb] Nicholas John Koch -- res_musiconhold: Added check for
       dot character in path of playlist entries to avoid warnings

    Category: Resources/res_pjsip

   ASTERISK-28794: res_pjsip: Crash when escaping during URI printing
   Reported by: nappsoft
     * [b37d7b5d0a] Joshua C. Colp -- res_pjsip: Use correct pool for storing
       the contact_user value.
   ASTERISK-26780: res_pjsip: PJSIP Registration Fails when
   transport=transport-udp6
   Reported by: Peter Sokolov
     * [110d563452] Peter Sokolov -- pjsip_resolver.c: Ensure AAAA dns
       requests are made.
   ASTERISK-28854: SIGSEGV when pjsip show history encounters IPV6 address
   Reported by: Roger James
     * [1249f911f3] Roger James -- res_pjsip_history.c: Fix to stop SIGSEGV
       when IPv6 addresses are encountered.

    Category: Resources/res_pjsip_nat

   ASTERISK-28884: x-ast-orig-host not filtered out from request URI and To
   header
   Reported by: nappsoft
     * [81929d478c] Pirmin Walthert -- res_pjsip_nat.c: remove
       x-ast-orig-host from request URI and To header

    Category: Resources/res_pjsip_session

   ASTERISK-28871: res_pjsip_session: Unnecessary re-Invite on call answer
   Reported by: Alexei Gradinari
     * [420d38555e] Joshua C. Colp -- bridge: Don't try to match audio
       formats.

    Category: Resources/res_rtp_asterisk

   ASTERISK-28904: RTP ICE leaks the memory
   Reported by: sungtae kim
     * [862b9fcce8] sungtae kim -- res_rtp_asterisk.c: Fixed memory leak
   ASTERISK-28852: Unprotected access to nochecksums variable, causes build
   failures
   Reported by: Guido Falsi
     * [858d3216dd] Guido Falsi -- res_rtp_asterisk: Protect access to
       nochecksums with #ifdef

    Category: Resources/res_srtp

   ASTERISK-28903: res_srtp: Answered Crypto Suite might be wrong in
   SDP/SDES.
   Reported by: Alexander Traud
     * [c00b032bbf] Alexander Traud -- res_srtp: Set all possible flags while
       selecting the Crypto Suite.
   ASTERISK-22920: Crash while Forwarding from TLS extension with CHANNEL
   args secure_bridge_media and secure_bridge_signaling
   Reported by: Shlomi Gutman
     * [0ce4a77367] Alexander Traud -- core_local: Local calls are always
       secure.

    Category: pjproject/pjsip

   ASTERISK-28794: res_pjsip: Crash when escaping during URI printing
   Reported by: nappsoft
     * [b37d7b5d0a] Joshua C. Colp -- res_pjsip: Use correct pool for storing
       the contact_user value.
   ASTERISK-28859: pjsip: Increase maximum candidate count
   Reported by: Joshua C. Colp
     * [4374f86219] Joshua C. Colp -- pjsip: Increase maximum ICE candidate
       count.

  Improvement

    Category: Addons/chan_mobile

   ASTERISK-28832: chan_mobile creates PCMA streams that make some VoIP
   clients crash or not render received audio
   Reported by: Peter Turczak
     * [3bde9dcc80] Peter Turczak -- chan_mobile: Add smoother to make
       SIP/RTP endpoints happy.

    Category: Core/DNS

   ASTERISK-28853: Missing include on FreeBSD
   Reported by: Guido Falsi
     * [ca5c1e6336] Guido Falsi -- core/dns: Add system include required on
       FreeBSD

    Category: Resources/res_ari_channels

   ASTERISK-28896: ari: Add support for specifying variables on channel
   create
   Reported by: Joshua C. Colp
     * [ed75fd14a3] Joshua C. Colp -- ari: Allow variables to be set on
       channel create.

    Category: Resources/res_pjsip_logger

   ASTERISK-28895: res_pjsip_logger: Add tons'o'functionality
   Reported by: Joshua C. Colp
     * [229cb16d52] Joshua C. Colp -- res_pjsip_logger: Expand functionality
       to improve logging.

    Category: Third-Party/pjproject

   ASTERISK-28866: third-party/pjproject/configure.m4 contains bashisms
   Reported by: Guido Falsi
     * [17a8d86e1e] Guido Falsi -- pjproject: Remove bashism from
       configure.m4 script

    Category: pjproject/pjsip

   ASTERISK-28879: pjproject has race conditions in it's build system
   Reported by: Guido Falsi
     * [42301b266f] Guido Falsi -- pjproject: Fix race condition when
       building with parallel make

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author               | Summary                            |
   |------------+----------------------+------------------------------------|
   | 2d14425e04 | Asterisk Development | Update CHANGES and UPGRADE.txt for |
   |            | Team                 | 16.11.0                            |
   |------------+----------------------+------------------------------------|
   | c0df04017f | Joshua C. Colp       | ARI: Bump non-breaking version     |
   |            |                      | number to 4.1.3                    |
   |------------+----------------------+------------------------------------|
   | dcad322562 | Joshua C. Colp       | res_sorcery_config: Always reload  |
   |            |                      | configuration on errors.           |
   |------------+----------------------+------------------------------------|
   | 9e7fc21086 | Jaco Kroon           | Remove #include <sys/cdefs.h>      |
   |------------+----------------------+------------------------------------|
   | cf5e30dd0e | George Joseph        | app_voicemail: Add workaround for  |
   |            |                      | a gcc 10 issue with -Wrestrict     |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 .lastclean                                                         |    1
 .version                                                           |    1
 ChangeLog                                                          |89175 ----------
 asterisk-16.10.0-summary.html                                      |  250
 asterisk-16.10.0-summary.txt                                       |  667
 b/CHANGES                                                          |   32
 b/addons/chan_mobile.c                                             |   63
 b/apps/app_fax.c                                                   |    2
 b/apps/app_osplookup.c                                             |   13
 b/apps/app_queue.c                                                 |   29
 b/apps/app_voicemail.c                                             |   13
 b/bridges/bridge_native_rtp.c                                      |   14
 b/bridges/bridge_simple.c                                          |   14
 b/bridges/bridge_softmix.c                                         |    7
 b/configure                                                        |   10
 b/include/asterisk/stasis_channels.h                               |    8
 b/main/app.c                                                       |   17
 b/main/ast_expr2.c                                                 |    1
 b/main/ast_expr2.y                                                 |    1
 b/main/asterisk.c                                                  |   22
 b/main/channel.c                                                   |    5
 b/main/core_local.c                                                |   14
 b/main/stasis_channels.c                                           |    3
 b/main/strcompat.c                                                 |   94
 b/main/stream.c                                                    |   13
 b/main/tcptls.c                                                    |    4
 b/res/ari/resource_channels.c                                      |   17
 b/res/ari/resource_channels.h                                      |    2
 b/res/res_ari_channels.c                                           |    5
 b/res/res_musiconhold.c                                            |   11
 b/res/res_pjsip.c                                                  |    2
 b/res/res_pjsip/pjsip_resolver.c                                   |   26
 b/res/res_pjsip_history.c                                          |    4
 b/res/res_pjsip_logger.c                                           |  451
 b/res/res_pjsip_nat.c                                              |   29
 b/res/res_rtp_asterisk.c                                           |    1
 b/res/res_sorcery_config.c                                         |   13
 b/res/res_srtp.c                                                   |    8
 b/rest-api/api-docs/channels.json                                  |    8
 b/rest-api/resources.json                                          |    2
 b/third-party/pjproject/configure.m4                               |   10
 b/third-party/pjproject/patches/0050-fix-race-parallel-build.patch |   12
 contrib/realtime/mysql/mysql_cdr.sql                               |   41
 contrib/realtime/mysql/mysql_config.sql                            | 1252
 contrib/realtime/mysql/mysql_voicemail.sql                         |   35
 contrib/realtime/postgresql/postgresql_cdr.sql                     |   45
 contrib/realtime/postgresql/postgresql_config.sql                  | 1356
 contrib/realtime/postgresql/postgresql_voicemail.sql               |   39
 48 files changed, 762 insertions(+), 93080 deletions(-)

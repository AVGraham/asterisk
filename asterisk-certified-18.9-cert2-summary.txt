                                Release Summary

                         asterisk-certified/18.9-cert2

                                Date: 2022-09-28

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release is a point release of an existing major version. The changes
   included were made to address problems that have been identified in this
   release series, or are minor, backwards compatible new features or
   improvements. Users should be able to safely upgrade to this version if
   this release series is already in use. Users considering upgrading from a
   previous version are strongly encouraged to review the UPGRADE.txt
   document as well as the CHANGES document for information about upgrading
   to this release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-certified/18.9-cert1.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were affected by commits that went into
   this release.

   Coders                      Testers               Reporters                
   22 George Joseph                                  12 George Joseph         
   4 Mike Bradeen                                    2 N A                    
   2 Naveen Albert                                   2 Joshua C. Colp         
   1 Kevin Harwell                                   1 Dan Cropp              
   1 Sean Bright                                     1 Daniel Th端men          
   1 Asterisk Development Team                       1 Michael Bradeen        
                                                     1 Sean Bright            
                                                     1 Dan Cropp              
                                                     1 Kevin Harwell          

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Bug

    Category: Contrib/General

   ASTERISK-29453: alembic: incoming_call_offer_pref and
   outgoing_call_offer_pref missing in "ps_endpoints" table
   Reported by: Daniel Th端men
     * [a7c71b1b71] Mike Bradeen -- alembic: add missing ps_endpoints columns

    Category: Core/BuildSystem

   ASTERISK-30044: GCC 12 issues
   Reported by: George Joseph
     * [8d4a298cd4] George Joseph -- GCC12: Fixes for 18+. state_id_by_topic
       comparing wrong value
     * [c0612ccc28] George Joseph -- GCC12: Fixes for 16+

    Category: Core/Sorcery

   ASTERISK-29453: alembic: incoming_call_offer_pref and
   outgoing_call_offer_pref missing in "ps_endpoints" table
   Reported by: Daniel Th端men
     * [a7c71b1b71] Mike Bradeen -- alembic: add missing ps_endpoints columns

    Category: Resources/res_geolocation

   ASTERISK-30234: res_geolocation: ...may be used uninitialized error in
   geoloc_config.c
   Reported by: George Joseph
     * [002272ad8b] George Joseph -- res_geolocation: Fix issues exposed by
       compiling with -O2
   ASTERISK-30215: Inbound SIP INVITE with Geo Location causing a
   Segmentation Fault
   Reported by: Dan Cropp
     * [3196ba7fcb] George Joseph -- res_geolocation: Fix segfault when
       there's an empty element
   ASTERISK-30190: res_geolocation: GEOLOC_PROFILE isn't returning correct
   values on incoming channel
   Reported by: George Joseph
     * [aeb465fdf1] George Joseph -- res_geolocation: Add two new options to
       GEOLOC_PROFILE
   ASTERISK-30167: res_geolocation: Refactor for issues found by users
   Reported by: George Joseph
     * [1bb1d3b5ef] George Joseph -- res_geolocation: Address user issues,
       remove complexity, plug leaks
   ASTERISK-30138: Compile failure in res_geolocation/geoloc_eprofile.c when
   optimization is enabled
   Reported by: George Joseph
     * [336209b319] George Joseph -- geoloc_eprofile.c: Fix setting of
       loc_src in set_loc_src()

    Category: Resources/res_pjsip

   ASTERISK-29453: alembic: incoming_call_offer_pref and
   outgoing_call_offer_pref missing in "ps_endpoints" table
   Reported by: Daniel Th端men
     * [a7c71b1b71] Mike Bradeen -- alembic: add missing ps_endpoints columns
   ASTERISK-30072: res_pjsip: allow TLS verification of wildcard cert-bearing
   servers
   Reported by: Kevin Harwell
     * [2074cf07f6] Kevin Harwell -- res_pjsip: allow TLS verification of
       wildcard cert-bearing servers

    Category: Tests/testsuite

   ASTERISK-26826: testsuite: Add support for Python 3
   Reported by: Joshua C. Colp
     * [b10cfb34e9] Mike Bradeen -- CI: Fixing path issue on venv check
     * [7b7ba8cbd1] Mike Bradeen -- CI: use Python3 virtual environment

    Category: Third-Party/pjproject

   ASTERISK-29804: bundled_pjproject: sip_inv is missing multipart support in
   some cases
   Reported by: George Joseph
     * [2ff2ccedc6] George Joseph -- bundled_pjproject: Add more support for
       multipart bodies

  Improvement

    Category: Documentation

   ASTERISK-29898: documentation: Add default attributes to documentation
   Reported by: N A
     * [bdcaf87bf2] Naveen Albert -- documentation: Adds missing default
       attributes.

    Category: Resources/res_geolocation

   ASTERISK-30185: res_geolocation: Allow location parameters to be specified
   in profiles
   Reported by: George Joseph
     * [22fc2b58d2] George Joseph -- res_geolocation: Allow location
       parameters on the profile object
   ASTERISK-30177: res_geolocation: Add option to suppress empty elements
   Reported by: George Joseph
     * [d6f6a30a49] George Joseph -- res_geolocation: Add profile parameter
       suppress_empty_ca_elements
   ASTERISK-30182: res_geolocation: Add built-in profiles to use in fully
   dynamic configurations
   Reported by: George Joseph
     * [e9ae638978] George Joseph -- res_geolocation: Add built-in profiles
   ASTERISK-30127: Create core Geolocation capability for Asterisk
   Reported by: George Joseph
     * [547e3590ef] George Joseph -- Geolocation: Core Capability Preview

    Category: Resources/res_pjsip

   ASTERISK-30178: extend user_eq_phone behavior to local uri's
   Reported by: Michael Bradeen
     * [fc2f8368e5] Mike Bradeen -- res_pjsip: Add user=phone on From and
       PAID for usereqphone=yes

    Category: Resources/res_pjsip_geolocation

   ASTERISK-30241: res_pjsip_gelocation: Downgrade some NOTICE scope trace
   debugs to DEBUG level
   Reported by: N A
     * [29495aafce] Naveen Albert -- res_pjsip_geolocation: Change some
       notices to debugs.
   ASTERISK-30128: Create PJSIP interface module for Geolocation
   Reported by: George Joseph
     * [b17e95a792] George Joseph -- Geolocation: chan_pjsip Capability
       Preview

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   reference a JIRA issue.

   +------------------------------------------------------------------------+
   | Revision   | Author               | Summary                            |
   |------------+----------------------+------------------------------------|
   | e21d1e7695 | Asterisk Development | Update CHANGES and UPGRADE.txt for |
   |            | Team                 | certified/18.9-cert2               |
   |------------+----------------------+------------------------------------|
   | f08a172893 | George Joseph        | Geolocation: Wiki Documentation    |
   |------------+----------------------+------------------------------------|
   | 5e3a2dd5b0 | George Joseph        | pjsip_config.xml: Fix omissions    |
   |            |                      | caused by wrong cherry-pick order  |
   |------------+----------------------+------------------------------------|
   | cc26b1d52b | George Joseph        | Geolocation: Base Asterisk Prereqs |
   |------------+----------------------+------------------------------------|
   | 4e604f03a7 | George Joseph        | xml.c, config,c: Add stylesheets   |
   |            |                      | and variable list string parsing   |
   |------------+----------------------+------------------------------------|
   | 157a9e64c1 | George Joseph        | core: Config and XML tweaks needed |
   |            |                      | for geolocation                    |
   |------------+----------------------+------------------------------------|
   | 4afe2355be | George Joseph        | res_pjsip: Add utils for checking  |
   |            |                      | media types                        |
   |------------+----------------------+------------------------------------|
   | 23bc002815 | George Joseph        | bundled_pjproject: Add additional  |
   |            |                      | multipart search utils             |
   |------------+----------------------+------------------------------------|
   | d3d5253155 | George Joseph        | bundled_pjproject: Create generic  |
   |            |                      | pjsip_hdr_find functions           |
   |------------+----------------------+------------------------------------|
   | 39b9607d4d | George Joseph        | Makefile: Allow XML documentation  |
   |            |                      | to exist outside source files      |
   |------------+----------------------+------------------------------------|
   | 65a63e534a | Sean Bright          | res_pjsip.c: Correct minor typos   |
   |            |                      | in 'realm' documentation.          |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 b/CHANGES                                                                                  |   80
 b/Makefile                                                                                 |   58
 b/Makefile.rules                                                                           |   15
 b/addons/Makefile                                                                          |    4
 b/apps/app_festival.c                                                                      |    2
 b/build_tools/get_sourceable_makeopts                                                      |   54
 b/build_tools/make_xml_documentation                                                       |  247
 b/build_tools/menuselect-deps.in                                                           |    1
 b/channels/chan_sip.c                                                                      |    4
 b/channels/sig_analog.c                                                                    |    4
 b/configs/samples/geolocation.conf.sample                                                  |  316
 b/configs/samples/pjsip.conf.sample                                                        |   25
 b/configure                                                                                |   12
 b/configure.ac                                                                             |    6
 b/contrib/ast-db-manage/config/versions/58e440314c2a_allow_wildcard_certs.py               |   29
 b/contrib/ast-db-manage/config/versions/7197536bb68d_geoloc_endpoint_params.py             |   22
 b/contrib/ast-db-manage/config/versions/9f3692b1654b_add_stir_shaken_profile_and_codec_.py |   58
 b/doc/appdocsxml.dtd                                                                       |    4
 b/funcs/func_scramble.c                                                                    |    2
 b/include/asterisk/config.h                                                                |   75
 b/include/asterisk/pbx.h                                                                   |   22
 b/include/asterisk/res_geolocation.h                                                       |  413 +
 b/include/asterisk/res_pjsip.h                                                             |   60
 b/include/asterisk/stringfields.h                                                          |   65
 b/include/asterisk/strings.h                                                               |   29
 b/include/asterisk/xml.h                                                                   |  134
 b/main/cdr.c                                                                               |    4
 b/main/config.c                                                                            |   97
 b/main/datastore.c                                                                         |    4
 b/main/pbx.c                                                                               |   15
 b/main/pbx_variables.c                                                                     |   54
 b/main/stasis_state.c                                                                      |    2
 b/main/stun.c                                                                              |    8
 b/main/utils.c                                                                             |   69
 b/main/xml.c                                                                               |  197
 b/makeopts.in                                                                              |    2
 b/res/Makefile                                                                             |    5
 b/res/res_ari.c                                                                            |    4
 b/res/res_config_pgsql.c                                                                   |    2
 b/res/res_geolocation.c                                                                    |  125
 b/res/res_geolocation.exports.in                                                           |    6
 b/res/res_geolocation/eprofile_to_pidf.xslt                                                |  235
 b/res/res_geolocation/geoloc_civicaddr.c                                                   |  151
 b/res/res_geolocation/geoloc_common.c                                                      |   36
 b/res/res_geolocation/geoloc_config.c                                                      |  761 ++
 b/res/res_geolocation/geoloc_datastore.c                                                   |  325
 b/res/res_geolocation/geoloc_dialplan.c                                                    |  376 +
 b/res/res_geolocation/geoloc_doc.xml                                                       |  310
 b/res/res_geolocation/geoloc_eprofile.c                                                    | 1343 ++++
 b/res/res_geolocation/geoloc_gml.c                                                         |  367 +
 b/res/res_geolocation/geoloc_private.h                                                     |  162
 b/res/res_geolocation/pidf_lo_test.xml                                                     |   33
 b/res/res_geolocation/pidf_to_eprofile.xslt                                                |  213
 b/res/res_geolocation/wiki/AsteriskImplementation.md                                       |  183
 b/res/res_geolocation/wiki/CivicAddress.md                                                 |  167
 b/res/res_geolocation/wiki/GML.md                                                          |   60
 b/res/res_geolocation/wiki/Geolocation.md                                                  |   74
 b/res/res_geolocation/wiki/ReferenceInformation.md                                         |   33
 b/res/res_geolocation/wiki/URI.md                                                          |   86
 b/res/res_pjsip.c                                                                          | 3319 ----------
 b/res/res_pjsip.exports.in                                                                 |    1
 b/res/res_pjsip/config_transport.c                                                         |   31
 b/res/res_pjsip/pjsip_config.xml                                                           | 2384 +++++++
 b/res/res_pjsip/pjsip_configuration.c                                                      |   39
 b/res/res_pjsip/pjsip_manager.xml                                                          |  901 ++
 b/res/res_pjsip/pjsip_transport_events.c                                                   |  122
 b/res/res_pjsip_geolocation.c                                                              |  666 ++
 b/res/res_pjsip_sdp_rtp.c                                                                  |    5
 b/res/res_pjsip_session.c                                                                  |    7
 b/res/res_tonedetect.c                                                                     |    2
 b/tests/CI/runTestsuite.sh                                                                 |   15
 b/tests/test_config.c                                                                      |   83
 b/tests/test_strings.c                                                                     |  139
 b/tests/test_vector.c                                                                      |    2
 b/third-party/pjproject/patches/0130-sip_inv-Additional-multipart-support-2919-2920.patch  |  661 +
 b/third-party/pjproject/patches/0150-Create-generic-pjsip_hdr_find-functions.patch         |  176
 b/third-party/pjproject/patches/0160-Additional-multipart-improvements.patch               |  576 +
 doc/CHANGES-staging/func_odbc_esc_backslashes.txt                                          |    7
 78 files changed, 12994 insertions(+), 3392 deletions(-)
